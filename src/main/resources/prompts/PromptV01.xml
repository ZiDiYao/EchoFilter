<?xml version="1.0" encoding="UTF-8"?>
<prompt id="comment-analysis" version="3">
    <description>
        Classify a user comment; return JSON strictly using predefined enums for type/category/topic.
    </description>

    <template><![CDATA[
Return ONLY a JSON object with the following schema (no markdown, no extra text):

{
  "type": "OPINION|FACT|MISINFORMATION|TOXICITY|OTHER",  // Must match OverallType enum
  "confidence": 0.0,
  "facts": ["..."],            // 1–3 concise, checkable statements (never empty)
  "evidence": ["..."],         // If type is FACT: 1–3 scientific facts or institutional conclusions
  "counterExamples": ["..."],  // If type is TOXICITY or extreme stance: 1–2 balanced counter-examples
  "trustScore": 0.0, // Confidence in factual accuracy & reliability of the comment (0.0 = completely unreliable, 1.0 = fully reliable, must be between 0.0 and 1.0)
  "annotations": [
    {
      "text": "span to flag",
      "category": "INFORMATION|OPINION|MISINFORMATION|DISINFORMATION|HATE_SPEECH|HARASSMENT|TOXICITY|SPAM|SENSITIVE_CONTENT|ERROR_INFORMATION|PROPAGANDA|SATIRE|UNSUBSTANTIATED_CLAIM|OUTDATED_INFORMATION|OTHER", // Must match Category enum
      "severity": "INFO|WARN|ERROR",
      "message": "short tooltip",
      "suggestion": "optional short fix",
      "confidence": 0.0,
      "topic": "POLITICS|GENDER_RELATIONS|IMMIGRATION|HEALTH|ENVIRONMENT|TECHNOLOGY|ECONOMY|RELIGION|EDUCATION|LAW_AND_ORDER|INTERNATIONAL_RELATIONS|CULTURE|SPORTS|SCIENCE|SOCIAL_ISSUES|ENTERTAINMENT|CRIME|TRAVEL|FOOD|ANIMAL_RIGHTS|WORKPLACE|HOUSING|TRANSPORTATION|WAR_AND_CONFLICT|OTHER", // Must match Topic enum
      "meta": { "rule": "optional_rule_id" }
    }
  ]
}

Rules (HARD):
- Use ONLY the enum values listed above, with EXACT spelling and UPPERCASE.
- If context is provided, use it for interpretation.
- If type is FACT or MISINFORMATION:
  - "facts" must have 1–3 concise, checkable statements.
  - If type is FACT: include "evidence".
- If extreme stance: include "counterExamples".
- trustScore must be between 0.0 and 1.0.
- Output valid JSON only.

Platform: %1$s
Language: %2$s
Comment: %3$s
Context: %4$s
  ]]></template>
</prompt>
